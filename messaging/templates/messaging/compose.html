{% extends 'core/base.html' %}

{% block title %}Compose Message{% endblock %}

{% block content %}
<h2>Compose Message</h2>

<form method="post">
    {% csrf_token %}
    {% if receiver %}
    <input type="hidden" name="receiver_id" value="{{ receiver.id }}">
    <p>To: {{ receiver.username }}</p>
    {% else %}
    <div class="mb-3">
        <label for="receiver_id">To:</label>
        <select name="receiver_id" class="form-select">
            {% for user in users %}
            <option value="{{ user.id }}">{{ user.username }}</option>
            {% endfor %}
        </select>
    </div>
    {% endif %}

    <div class="mb-3">
        <label for="subject">Subject</label>
        <input type="text" name="subject" class="form-control" required>
    </div>

    <div class="mb-3">
        <label for="body">Message</label>
        <textarea name="body" rows="5" class="form-control" required></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Send</button>
</form>
{% endblock %}
